class Point{constructor(t,e,s,i){this.pos=new Vector(t,e),this.vel=Vector.random2D(),this.acc=new Vector(0,0),this.target=new Vector(t,e),this.maxSpeed=config.maxSpeed,this.maxForce=config.maxForce,this.color=s,this.arriveRadius=50,this.active=i}behaviour(t){let e=this.arrive(this.target),s=this.repel(t),i=this.attract(t);s.mult(.2),i.mult(.3),e.mult(.1),this.applyForce(e),this.applyForce(s),mouseDown&&this.applyForce(i)}applyForce(t){this.acc.add(t)}arrive(){let t=Vector.sub(this.target,this.pos),e=t.mag(),s=this.maxSpeed;e<this.arriveRadius&&(s=map(e,0,50,0,this.maxSpeed)),t.setMag(s);let i=Vector.sub(t,this.vel);return i.limit(this.maxForce),i}repel(t){let e=Vector.sub(t,this.pos);if(!(e.mag()<config.repelRadius))return new Vector(0,0);{e.setMag(6),e.mult(-1);let s=Vector.sub(e,this.vel);return s.limit(this.maxForce),s}}attract(t){let e=Vector.sub(t,this.pos);if(!(e.mag()<config.attractRadius))return new Vector(0,0);{e.setMag(this.maxSpeed),e.mult(1);let s=Vector.sub(e,this.vel);return s.limit(this.maxForce),s}}update(){this.pos.add(this.vel),this.vel.add(this.acc),this.acc.mult(0),this.maxSpeed=config.maxSpeed,this.maxForce=config.maxForce}shake(){this.active||(this.acc=new Vector(random(-.2,.2),random(-.2,.2))),this.acc.x=random(-.1,.1),this.acc.y=random(-.1,.1)}blast(){this.acc.x=random(-5,5),this.acc.y=random(-5,5)}setTarget(t,e){this.target.x=t,this.target.y=e}reset(){this.target.x=random(CANVAS_WIDTH),this.target.y=random(CANVAS_HEIGHT),this.color="rgba(255,255,255,0.3)",this.active=!1}render(){let t=5;t=this.active?3:5,c.alpha(1/t+.3),c.fill(this.color),c.rect(this.pos.x,this.pos.y,t+this.acc.x,t+this.acc.y)}}